@{
    ViewData["Title"] = "OpenIDConnect Client Demo";
}

<div class="text-center">
    <h1 class="display-4">OpenIDConnect Client Demo</h1>
    <div class="mt-4">
        <button id="callUnprotectedResourceButton" class="btn btn-primary" onclick="getFreeWeatherForcast();">Get free weather forcast (unprotected API)</button>
    </div>
    <div class="mt-4">
        <button id="callProtectedResourceButton" class="btn btn-warning" onclick="getDetailedWeatherForcast();">Get detailed weather forcast (protected API)</button>
    </div>
    <div class="mt-4">
        <textarea id="message" class="form-control" rows="10"></textarea>
    </div>
</div>

<script type="text/javascript">
    function log(text) {
        document.getElementById("message").value += text + '\n';
    }

    async function getFreeWeatherForcast() {
        const response = await fetch('/api/weatherforcast/v1/free');
        const forcast = await response.text();

        log(forcast);

        return false;
    }

    async function getDetailedWeatherForcast() {
        const response = await fetch('/api/weatherforcast/v1/detailed');
        const forcast = await response.text();

        log(forcast);

        return false;
    }
</script>
